require_relative "idhashdist"

a, b = 27362028616592833077810614538336061650596602259623245623188871925927275101952, 57097733966917585112089915289446881218887831888508524872740133297073405558528
p (a ^ b) & ((a | b) >> 128)
p ((a ^ b) & ((a | b) >> 128)).to_s(2).count(?1)
p dist 27362028616592833077810614538336061650596602259623245623188871925927275101952, 57097733966917585112089915289446881218887831888508524872740133297073405558528

t = Time.now
2000000.times do
  dist 27362028616592833077810614538336061650596602259623245623188871925927275101952, 57097733966917585112089915289446881218887831888508524872740133297073405558528
end
p Time.now - t

__END__

def ff a, b
  ((a ^ b) & ((a | b) >> 128)).to_s(2).count(?1)
end
t = Time.now
1000000.times do
  ff 27362028616592833077810614538336061650596602259623245623188871925927275101952, 57097733966917585112089915289446881218887831888508524872740133297073405558528
end
p Time.now - t

t = Time.now
1000000.times do
  dist 27362028616592833077810614538336061650596602259623245623188871925927275101952 + rand(1000009),
       57097733966917585112089915289446881218887831888508524872740133297073405558528 + rand(1000009)
end
p Time.now - t

def ff a, b
  ((a ^ b) & ((a | b) >> 128)).to_s(2).count(?1)
end
t = Time.now
1000000.times do
  ff 27362028616592833077810614538336061650596602259623245623188871925927275101952 + rand(1000009),
     57097733966917585112089915289446881218887831888508524872740133297073405558528 + rand(1000009)
end
p Time.now - t
